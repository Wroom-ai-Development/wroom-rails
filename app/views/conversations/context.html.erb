
<%= turbo_frame_tag "conversation_frame" do %>
  <div class="context">
    <script>
      function refreshFrame(document_id) {
        console.log('refreshing frame');
        const conversationFrame = document.getElementById('conversation_frame');
        if (document.getElementById(`tree-document-${document_id}`).classList.contains('linked')) {
          document.getElementById(`tree-document-${document_id}`).classList.add('unloading');
        } else {
          document.getElementById(`tree-document-${document_id}`).classList.add('loading');
        }
        setTimeout(() => {
          conversationFrame.src = '/conversations/<%= @conversation.id %>/context'
        }, 500)
      }
    </script>
    <% @conversation.reload %>
    <%= link_to "âŒ", wroom_path(@conversation.document) %>
    <%= render 'tree_folder', folder: current_user.root_folder %>
  </div>
<% end %>
