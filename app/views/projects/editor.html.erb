<%= turbo_frame_tag "project_editor" do %>
  <div id='edit-project'>
    <%= button_to "␡", @project, method: :delete, class: 'delete-project', data: {turbo_method: :delete, turbo_confirm: "Please confirm you meant to delete #{@project.title}"} %>

    <%= form_with(
        model: @project,
        data: {controller: 'project', autosave_delay: '250'},
        id: 'edit-project'
    ) do |form| %>
        <% if @project.source_based %>
          <%= render 'sources/show', source: @project.source %>
        <% else %>
          <div class='top-pane'>
            <%= form.text_field :title, data: { action: "keyup->project#save blur->project#save" } %>
          </div>
          <%= form.rich_text_area :content, placeholder: 'Use this space to make notes and save useful fragments of your conversation.', data: { action: "keyup->project#save blur->project#save" } %>
        <% end %>
    <% end %>
  </div>
<% end %>
