<%= turbo_frame_tag 'view_content' do %>
  <div class="header">
    <span><%= @folder.type == 'RootFolder' ? 'My Files' : @folder.name %></span>
    <% unless @folder.type == 'RootFolder' %>
      <div class="controls">
        <%= link_to "Rename", edit_folder_path(@folder), data: { turbo_frame: '_top' } %>
        <%= button_to "‚ùå", folder_path(@folder), method: :delete, class: 'delete-folder',
          form: {
            data: {
                turbo: false,
                controller: "confirmation",
                action: 'submit->confirmation#confirm',
                confirmation_message_value: "Please confirm you meant to delete #{@folder.name}",
            }
          } %>
      </div>
    <% end %>
  </div>
  <div class="folder-content">
    <% if @folder.type == 'RootFolder' && @folder.empty? %>
      <div class="no-content">
        <h3>Welcome to WROOM</h3>
        <p>Click the "New" button to create a new folder or document.</p>
        <div class="haiku">
          <%= simple_format(@haiku) %>
        </div>
      </div>
    <% end %>
    <table class="folder-contents-table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Created</th>
          <th>Last accessed</th>
          <th>Type</th>
        </tr>
      </thead>
      <tbody>
        <% unless @folder.type == 'RootFolder' %>
          <tr>
            <td>
              <%= link_to folder_path(@folder.parent) do %>
              <span class='icon'>üìÅ </span>..
              <% end %>
            </td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
        <% end %>
        <% @folder.children.kept.each do |folder| %>
          <tr>
            <td><%= link_to folder do %>
              <span class='icon'>üìÅ </span><%= folder.name %>
            <% end %></td>
            <td><%= folder.created_at.strftime("%b %d, %Y %H:%M") %></td>
            <td><%= folder.updated_at.strftime("%b %d, %Y %H:%M") %></td>
            <td>
              Folder
            </td>
          </tr>
        <% end %>
        <% @folder.documents.kept.each do |document| %>
          <tr>
            <td><%= link_to wroom_path(document_id: document.id), data: { turbo_frame: '_top' } do %>
              <span class='icon'><%= document.icon %></span><%= document.title %>
            <% end %></td>
            <td><%= document.created_at.strftime("%b %d, %Y %H:%M") %></td>
            <td><%= document.updated_at.strftime("%b %d, %Y %H:%M") %></td>
            <td>
              <%= document.source_based ? "Source" : "Document" %>
            </td>
          </tr>
        <% end %>
    </table>

  </div>
<% end %>
